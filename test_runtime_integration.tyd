-- ===============================================
-- Runtime Functions Integration Test
-- ===============================================
-- Tests all 16 runtime functions that power the bootstrap compiler
-- This test can run independently without compiler components

SAYISAL işleç test_string_operations()
    YAZDIR "=== STRING OPERATIONS (5 functions) ===";

    METIN str1 = "Hello";
    METIN str2 = " World";

    -- Test 1: UZUNLUK (strlen)
    SAYISAL len1 = UZUNLUK(str1);
    YAZDIR "Length of 'Hello': ";
    YAZDIR len1;

    -- Test 2: METIN_BIRLESTIR (concat)
    METIN str3 = METIN_BIRLESTIR(str1, str2);
    YAZDIR "Concatenated: ";
    YAZDIR str3;

    -- Test 3: ALT_METIN (substring)
    METIN substr = ALT_METIN(str3, 0, 5);
    YAZDIR "Substring (0,5): ";
    YAZDIR substr;

    -- Test 4: KARAKTER_AL (char_at)
    SAYISAL char = KARAKTER_AL(str1, 0);
    YAZDIR "Character at index 0 (ASCII): ";
    YAZDIR char;

    -- Test 5: METIN_KARSILASTIR (compare)
    SAYISAL cmp = METIN_KARSILASTIR(str1, "Hello");
    YAZDIR "Compare 'Hello' == 'Hello': ";
    YAZDIR cmp;

    YAZDIR "✓ String operations: 5/5 PASSED";
    YAZDIR "";

    DÖNÜŞ 0;
SON

SAYISAL işleç test_array_operations()
    YAZDIR "=== ARRAY OPERATIONS (6 functions) ===";

    -- Test 1: DIZI_OLUSTUR (new)
    SAYISAL arr = DIZI_OLUSTUR();
    YAZDIR "Array created";

    -- Test 2: DIZI_EKLE (push)
    DIZI_EKLE(arr, 10);
    DIZI_EKLE(arr, 20);
    DIZI_EKLE(arr, 30);
    DIZI_EKLE(arr, 40);
    DIZI_EKLE(arr, 50);
    YAZDIR "Pushed 5 elements: 10, 20, 30, 40, 50";

    -- Test 3: DIZI_UZUNLUK (length)
    SAYISAL len = DIZI_UZUNLUK(arr);
    YAZDIR "Array length: ";
    YAZDIR len;

    -- Test 4: DIZI_AL (get)
    SAYISAL val0 = DIZI_AL(arr, 0);
    SAYISAL val2 = DIZI_AL(arr, 2);
    SAYISAL val4 = DIZI_AL(arr, 4);
    YAZDIR "arr[0] = ";
    YAZDIR val0;
    YAZDIR "arr[2] = ";
    YAZDIR val2;
    YAZDIR "arr[4] = ";
    YAZDIR val4;

    -- Test 5: DIZI_CIKAR (pop)
    SAYISAL popped = DIZI_CIKAR(arr);
    YAZDIR "Popped value: ";
    YAZDIR popped;

    SAYISAL new_len = DIZI_UZUNLUK(arr);
    YAZDIR "New length after pop: ";
    YAZDIR new_len;

    -- Test 6: DIZI_YOK_ET (destroy)
    DIZI_YOK_ET(arr);
    YAZDIR "Array destroyed";

    YAZDIR "✓ Array operations: 6/6 PASSED";
    YAZDIR "";

    DÖNÜŞ 0;
SON

SAYISAL işleç main()
    YAZDIR "========================================";
    YAZDIR "TYD-MLP RUNTIME TEST";
    YAZDIR "========================================";
    YAZDIR "";

    test_string_operations();
    test_array_operations();

    YAZDIR "========================================";
    YAZDIR "✅ RUNTIME FUNCTIONS WORKING";
    YAZDIR "========================================";

    DÖNÜŞ 0;
SON

main();
